<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="admin.css?version=1">
</head>
<body>
    <!-- Login header КОНЕЦ -->
    <header>
        <div class="flex-row">
            <div class="title">Введите свой логин и пароль</div>
        </div>
    </header>
    <!-- Login header КОНЕЦ -->
    <!-- Сообщение об ошибке -->
    <div class="error-holder">
        <span>Error</span>
    </div>
    <!-- Сообщение об ошибке КОНЕЦ -->
    <div class="content">
        <div class="holder">
            <!-- Форма входа -->
            <div class="login">
                <div class="input-row">
                    <label for="username">Логин</label>
                    <input type="text" id="username">
                </div>
                <div class="input-row">
                    <label for="pass">Пароль</label>
                    <input type="password" id="pass">
                </div>

                <div class="input-row">
                    <button class="b-login button green" onclick="auth()">Войти</button>
                </div>
            </div>
            <button onclick="auth()">Вход в аккаунт</button>
            <!-- Форма входа КОНЕЦ -->
        </div>
    </div>
    <!-- footer -->
    <footer>
        <small>JavaBlog</small>
    </footer>
    <!-- footer КОНЕЦ -->
<script src="login.js"></script>
<script>
    function auth() {
        var email = document.getElementById("username").value;
        var password = document.getElementById("pass").value;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function () {
            if (this.readyState === 4 && this.status === 200) {
                var users = this.responseText;
                console.log(users);
                if (users === true){
                    alert("авторизация успешна!");
                    console.log("Success!");
                }
                xmlhttp.open("POST", "http://localhost:8080/users/findByEmail", true);
                xmlhttp.setRequestHeader("Content-Type", "application/json");
                xmlhttp.send(JSON.stringify({email: email, passwd: password}));


                /*for (var i = 0; i < users.length; i++) {
                    if (user === users[i].email && password === users[i].passwd) {
                        alert("авторизация успешна!");
                        xmlhttp.open("GET", "http://localhost:8080/users/findAll", true);
                        xmlhttp.send();
                    }
                }*/
            }
        }
    }
</script>
</body>

</html>